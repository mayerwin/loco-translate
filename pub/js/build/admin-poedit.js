(function(A,u,d){function M(a){a.stopPropagation();a.preventDefault();return!1}function W(a,c){function k(){g();h=setTimeout(function(){d(a).fadeOut(1E3,c)},f)}function g(){h&&clearTimeout(h);h=null}var h,f=5E3;k();d(a).mouseenter(g).mouseleave(k)}function S(a,c){function k(g){d(a).remove();d(A).triggerHandler("resize");return g&&M(g)}d('<a class="dismiss" href="#">&times;</a>').appendTo(a).click(k);c||W(a,k)}function T(a,c,k,g){var h="loco-js-"+k,k=u.getElementById(h)||d('<div id="'+h+'" class="loco-message '+
(g||k)+'"></div>').insertBefore(d("#loco-poedit")),a=d(u.createElement("p")).text(a),c=d(u.createElement("strong")).text(c+": ");a.prepend(c).appendTo(d(k).html(""));d(A).triggerHandler("resize");S(k)}function U(a){return T(a,O("OK"),"updated loco-success")}function V(a,c,k){function g(a,f,b){b=b||O("Unknown Ajax error");T(b,O("Error"),"error");k&&k(a,f,b)}return d.ajax({url:X,type:a.method,data:d(a).serialize(),dataType:"json",error:g,success:function(a,f,b){!a||a.error?g(b,f,a&&a.error&&a.error.message):
c&&c(a,f,b)}})}var o=function(){var a={};return{register:function(c,d){a[c]=d},require:function(c,d){var g=a[c];if(!g)throw Error('CommonJS error: failed to require("'+d+'")');return g}}}();o.register("$3",function(a){function c(a){this.reIndex([]);if(a)for(var c in a)this.add(c,a[c])}a.init=function(a){return new c(a)};var d=c.prototype;d.reIndex=function(a){var c=-1;for(this.ords={};++c<a.length;)this.ords[a[c]]=c;this.keys=a;this.length=c};d.key=function(a,c){if(null==c)return this.keys[a];var f=
this.keys[a],b=this.ords[c];if(c!==f){if(null!=b)throw Error("Clash with item at ["+b+"]");this.keys[a]=c;delete this.ords[f];this.ords[c]=a}return a};d.indexOf=function(a){return this.ords[a]};d.add=function(a,c){var f=this.ords[a];null==f&&(this.keys[this.length]=a,f=this.ords[a]=this.length++);this[f]=c;return f};d.get=function(a){return this[this.ords[a]]};d.cut=function(a,c){var f=[].splice.call(this,a,c);this.keys.splice(a,c);this.reIndex(this.keys);return f};d.each=function(a){for(var c=-1;++c<
this.length;)a(this.keys[c],this[c],c);return this};d=null;return a}({},A,u));o.register("$1",function(a){function c(b){return{"Project-Id-Version":"PACKAGE VERSION","Report-Msgid-Bugs-To":"","POT-Creation-Date":b||"","POT-Revision-Date":b||"","PO-Revision-Date":b||"","Last-Translator":"","Language-Team":"",Language:"","Plural-Forms":"","MIME-Version":"1.0","Content-Type":"text/plain; charset=UTF-8","Content-Transfer-Encoding":"8bit","X-Poedit-SourceCharset":"UTF-8"}}function d(b,a){var e=b||"";a&&
(e+="\000"+a);return e}function g(){return o.require("$3","collection.js").init()}function h(b){if(!b)return'""';for(var a=b.replace("\r\n","\n").split("\n"),e=a.length-1,l=[],c=-1,d;++c<a.length;){b=a[c];for(e&&e!==c&&(b+="\n");b&&b.charAt(79);){for(d=80;--d;)if(-1!==" \n\r.?!,;:-".indexOf(b.charAt(d))){d++;break}d||(d=79);l.push(f(b.substr(0,d)));b=b.substr(d)}b&&l.push(f(b))}l[1]&&l.unshift("");return'"'+l.join('"\n"')+'"'}function f(b){return b.replace(/(["\\])/g,"\\$1").replace(/\n/g,"\\n")}
function b(b){this.head={};this.headers(c(this.now()));this.locale(b);this.length=0;this.rows=g()}function l(b,a){this.src=[b||""];this.msg=[a||""];this.cmt="";this.status=0}a.create=function(a){return new b(a)};var e=b.prototype;e.now=function(){return(new Date).toString()};e.header=function(b,a){if(null==a)return this.headers()[b]||"";this.head[b]=a||"";return this};e.headers=function(b){var a;if(null!=b){for(a in b)this.head[a]=b[a];return this}var e=this.locale(),l=this.now(),b={};for(a in this.head)b[a]=
String(this.head[a]);e?(b.Language=e.label||"Unknown locale",b["Plural-Forms"]="nplurals="+(e.nplurals||"2")+"; plural="+(e.pluraleq||"n!=1"),b["X-Loco-Target-Locale"]=(e.lang||"en")+"_"+(e.region||"GB"),b["PO-Revision-Date"]=l,delete b["POT-Revision-Date"]):(b.Language="",b["Plural-Forms"]="nplurals=INTEGER; plural=EXPRESSION",b["POT-Revision-Date"]=l,b["PO-Revision-Date"]="YEAR-MO-DA HO:MI+ZONE");b["X-Generator"]="Loco - http://localise.biz/";return b};e.locale=function(b){if(null==b)return this.loc;
this.loc=b||{lang:"en",region:"GB",nplurals:2,pluraleq:"n == 1 ? 0 : 1",label:"English"};this.loc.toString=function(){return this.lang+"_"+this.region};return this};e.lock=function(b){this.locale(b||!1);return this.loc};e.unlock=function(){var b=this.loc;this.loc=null;return b};e.reIndex=function(b,a){var e=this.indexOf(b),l=b.hash(),c=this.rows.indexOf(l);return c===e?e:c!=null?(a=(a||0)+1,b.source("Error, duplicate "+String(a)+": "+b.source()),this.reIndex(b,a)):this.rows.key(e,l)};e.get=function(b,
a){return this.rows.get(d(b,a))};e.indexOf=function(b){if(null==b.idx)b.idx=this.rows.indexOf(b.hash());return b.idx};e.del=function(b){b=this.indexOf(b);if(null!=b){var a=this.rows.cut(b,1);if(a&&a.length)return this.length=this.rows.length,this.rows.each(function(b,a,e){a.idx=e}),b}};e.add=function(b,a){b instanceof l||(b=new l(b));a&&b.context(a);var e=b.hash();if(this.rows.get(e))throw Error("Duplicate message at index "+this.indexOf(b));b.idx=this.rows.add(e,b);this.length=this.rows.length;return b};
e.eq=function(b,a){return b===a||b.source()===a.source()&&b.context()===a.context()};e.each=function(b){this.rows.each(b);return this};e.load=function(b){for(var a=-1,e,c,f,d,g=[],h=[],t=[],z=[];++a<b.length;)if(e=b[a],null==e.parent){if(c=e.source||e.id,f=e.context,c||f)d=new l(c,e.target||""),f&&d.context(f),e.flag&&d.flag(e.flag,!0),e.comment&&d.comment(e.comment),e.message=d,d.translation()?d.fuzzy()?t.push(d):h.push(d):z.push(d)}else g.push(e);for(a=-1;++a<g.length;)try{e=g[a];c=e.source||e.id;
d=b[e.parent]&&b[e.parent].message;if(!d)throw Error("parent missing for plural "+c);1===e.plural&&d.plural(c);d.translate(e.target||"",e.plural)}catch(v){}c=[z,t,h];for(a=0;a<3;a++){e=c[a];for(b=-1;++b<e.length;)try{this.add(e[b])}catch(k){}}return this};e.merge=function(b){var a,e=this.rows,l=g(),c={add:[],del:[]},b=b.rows;this.rows.each(function(a,e){b.get(a)||c.del.push(e)});b.each(function(b,f){try{a=e.get(b),a||(a=f,c.add.push(a)),a.idx=l.add(b,a)}catch(d){}});this.rows=l;this.length=l.length;
return c};e.row=function(b){return this.rows[b]};e.toString=function(){var b,a=[],e=[],c=this.headers(),f=!this.loc;for(b in c)e.push(b+": "+c[b]);e=new l("",e.join("\n"));f&&(e.comment("Loco Gettext template"),e.fuzzy(!0));a.push(e.toString());a.push("");this.rows.each(function(b,e){a.push(e.toString(f));a.push("")});return a.join("\n")};e=l.prototype;e.hash=function(){return d(this.source(),this.context())};e.flag=function(b,a){var e=b===(b&this.status);if(null==a)return e;a?this.status|=b:e&&(this.status^=
b);return this};e.fuzzy=function(b){return this.flag(4,b)};e.source=function(b,a){if(null==b)return this.src[0];this.src[0]=b;this.plural(a);return this};e.plural=function(b){if(null==b)return this.src[1];this.src[1]=b||"";return this};e.each=function(b){for(var a=-1;++a<this.msg.length;)b(a,this.msg[a]);return this};e.translate=function(b,a){this.msg[a||0]=b||"";return this};e.translation=function(b){return this.msg[b||0]||""};e.comment=function(b){if(null==b)return this.cmt||"";this.cmt=b||"";return this};
e.context=function(b){if(null==b)return this.src[2]||"";this.src[2]=b||"";return this};e.toString=function(b){var a,e=[];this.cmt&&(e=["# "+this.cmt.replace("\r\n","\n").split("\n").join("\n# ")]);!b&&this.fuzzy()&&e.push("#, fuzzy");this.src[2]&&e.push("msgctxt "+h(this.src[2]));e.push("msgid "+h(this.src[0]));if(null==this.src[1])e.push("msgstr "+h(b?"":this.msg[0]));else{a=-1;for(e.push("msgid_plural "+h(this.src[1]));++a<this.msg.length;)e.push("msgstr["+a+"] "+h(b?"":this.msg[a]))}return e.join("\n")};
e.weight=function(){var b=0;this.translation()||(b+=2);this.fuzzy()&&(b+=1);return b};e.compare=function(b,a){var e=this.weight(),l=b.weight();if(e>l)return 1;if(e<l)return-1;if(a){e=this.hash().toLowerCase();l=b.hash().toLowerCase();if(e<l)return 1;if(e>l)return-1}return 0};e=e=null;return a}({},A,u));o.register("$14",function(a,c,d){function g(l){b||c._gat&&(b=_gat._createTracker(h,"loco"));if(b){var e=l.shift();b[e].apply(b,l)}else f&&f.push(l);return a}var h,f,b;a._init=function(b){if(h=b.code){f=
c._gaq||(c._gaq=[]);f.push(["_setAccount",h]);f.push(["_trackPageview"]);f.push(["_setDomainName",b.host]);b=d.createElement("script");b.type="text/javascript";b.async=!0;b.src=("https:"==d.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js";var e=d.getElementsByTagName("script")[0];e.parentNode.insertBefore(b,e)}return a};a.event=function(b,a,c,f){return g(["_trackEvent",b||"",a||"",c||"",f||0])};a.page=function(b,a){return g(["_trackPageview",{page:b||location.pathname+location.hash,
title:a||d.title}])};return a}({},A,u));o.register("$15",function(a,c,d){function g(b,l){if(h)h[b](l);else c.ga&&ga(b,l);return a}var h,f;a._init=function(b){b.code&&(function(b,a,c,f,d,g,h){b.GoogleAnalyticsObject=d;b[d]=b[d]||function(){(b[d].q=b[d].q||[]).push(arguments)};b[d].l=1*new Date;g=a.createElement(c);h=a.getElementsByTagName(c)[0];g.async=1;g.src=f;h.parentNode.insertBefore(g,h)}(c,d,"script","//www.google-analytics.com/analytics.js","ga"),ga("create",b.code,{alwaysSendReferrer:!0}),
b.custom&&g("set",b.custom),a.page(),ga(function(b){h=b}));return a};a.event=function(b,a,e,c){return g("send",{hitType:"event",eventCategory:b||"",eventAction:a||"",eventLabel:e||"",eventValue:Number(c||0)})};a.page=function(b,a){var e={hitType:"pageview",page:b||location.pathname+location.hash,title:a||d.title};e.location=location.protocol+"//"+location.hostname+e.page;f&&g("set",{referrer:f});f=e.location;return g("send",e)};a.reset=function(){f=location.href;g("set",{page:location.pathname+location.hash,
title:d.title,location:f});return a};return a}({},A,u));o.register("$7",function(a){var c;a.init=function(d){if(!c&&d)d.host||(d.host=location.hostname),c=d.legacy?o.require("$14","legacy.js"):o.require("$15","universal.js"),c._init(d);return a};a.link=function(k){var g,h=k.getAttribute("href");if(!h||"#"===h)return a;if(0===h.indexOf("#"))g="anchor";else if((0===h.indexOf("http")||0===h.indexOf("//"))&&-1===h.indexOf())g="external",k.setAttribute("target","_blank");else return a;d(k).click(function(){c.event(g,
"click",h);return!0});k=null;return a};a.page=function(){c&&c.page.apply(c,arguments);return a};a.event=function(){c&&c.event.apply(c,arguments);return a};a.reset=function(){c&&c.reset&&c.reset();return a};return a}({},A,u));o.register("$21",function(a,c,k){function g(b,a,e,c,g){function p(){B&&clearTimeout(B);m&&m.fadeOut(400,function(){d(this).remove();m=null});return!1}function h(){n();c!==-1&&(B=setTimeout(p,c||2E3));m.unbind("mouseleave");m.mouseenter(n)}function n(){B&&clearTimeout(B);B=null;
m.unbind("mouseenter");m.mouseleave(h)}var B;if(!f)f=k.createElement("div"),f.id="growls",k.body.appendChild(f);var m=d('<div class="growl growl-'+e+'"><div><a class="close" href="#"><span>X</span></a><span class="badge"></span><p class="message"></p><small class="caption"></small></div></div>');m.find("p").text(b||"Empty message");a?m.find("small").text(a):m.find("small").remove();if(g.length){g.push({label:"Cancel",callback:p,css:"cancel"});for(var s,t=d('<form action="#" class="dialog"></form>'),
a=function(b,a){s=d('<input type="button" value="'+a.label+'" class="butt '+(a.css||"")+'" />');s.click(function(b){"function"===typeof a.callback&&a.callback(b,{close:p})});t.append(s);return s},b=0;b<g.length;b++)a(b,g[b]);m.append(t)}d(f).prepend(m.hide().fadeIn(400));m.find("a").click(p);h()}var h,f;a.init=function(){if(!h)return h=c.alert,c.alert=function(b){var b=String(b).split("\n"),c=b[1]&&b.slice(1).join("\n");a.alert(b[0],c)},a};a.debug=function(b){h(b);return a};a.alert=function(b,a,e,
f,d){try{return g(b,a||"",e||"alert",f||4E3,d||[]),!0}catch(p){return b+="\n\n--\n"+(p.message||p),h.call(c,b),!1}};a.success=function(b,c,e){return a.alert(b,c,"success",e||2E3)};a.dialog=function(b,c,e,f){return a.alert(b,c,f||"alert",-1,e)};a.login=function(b,c,e,f){a.dialog(c||"You're not logged in",e||"Please log in to continue",[{label:f||"Log in",callback:function(){location.assign(b||"/session/auth/login?r="+encodeURIComponent(location.href))}}])};return a}({},A,u));o.register("$17",function(a,
c,k){function g(b){return b.keyCode===27&&q&&n?(D(),b.preventDefault(),!1):!0}function h(a){if(q){var e=Math.max(b.height(),l.outerHeight(!0));e&&y.css("height",e+"px");a&&(z=d(c).innerWidth(),F(v))}return!0}function f(b){b?(r.show(),e.addClass("has-title")):(r.hide(),e.removeClass("has-title"))}var b,l,e,y,r,p,q=!1,n=!1,B=!1,m,s,t,z,v,C=a.init=function(){if(!b){b=d('<div id="overlay"></div>');l=d('<div class="overlay-frame"></div>');e=d('<div class="overlay-container"></div>');r=d('<div class="overlay-title"><span class="title">Untitled</span></div>');
p=d('<a class="overlay-close" href="#"><span>x</span></a>');y=d('<div class="overlay-bg"></div>');b.append(l.append(e)).append(y).prependTo(k.body);d(k).bind("keydown",g);d(c).resize(h);t=e.outerWidth(!0)-e.width()+(l.innerWidth()-l.width());e.outerHeight(!0);e.outerHeight(!1);l.innerHeight();l.height();z=d(c).innerWidth();m=parseInt(e.css("width"));if(!m||isNaN(m))m=e.width();s=parseInt(e.css("height"));if(!s||isNaN(s))s=e.height();r.append(p.hide()).hide().prependTo(l);b.hide()}return b},F=a.width=
function(c){C();if(c===null)l.css("width",""),e.css("width","");else{c=c||m||640;x=c+t;v=c;var f=z;x>f?(x=f,c=x-t,b.addClass("spill")):b.removeClass("spill");l.css("width",x+"px");e.css("width",c+"px")}return a};a.autoSize=function(){C();h();var b=m||0;e.children().each(function(a,e){b=Math.max(b,d(e).outerWidth(!0))});F(b);return a};a.css=function(b){C().attr("class",b);return a};a.html=function(b){C();c.innerShiv&&(b=innerShiv(b,!1));return e.html(b)};a.append=function(b){C();b instanceof jQuery||
(b=d(b));e.append(b);return a};var D=a.close=function(c){if(q){var f=function(){C().hide();d(k.body).removeClass("has-overlay");q=!1;e.html("");q=null;b.trigger("overlayClosed",[a])};c==null&&(c=300);c?b.fadeOut(c,f):f()}return a};a.title=function(b){C();B=b||"";r.find("span.title").text(B);b!=null?f(!0):n||f(!1);return a};a.enableClose=function(){C();n=!0;p.unbind("click").bind("click",function(){D();return!1});f(!0);p.show();return a};a.disableClose=function(){C();n=!1;p.hide();q&&B||f(!1);return a};
a.open=function(){C();e.html("");F(m);b.attr("class","");d(k.body).addClass("has-overlay");C().show();q=!0;h();a.title(null);n&&f(!0);b.trigger("overlayOpened",[a]);return a};a.listen=function(b){C().bind("overlayClosed",b);return a};a.unlisten=function(b){C().unbind("overlayClosed",b);return a};return a}({},A,u));o.register("$16",function(a,c,k){var g={401:"You've been logged out",404:"Not Found",500:"Server Error",502:"Bad Gateway",503:"Service unavailable",504:"Gateway timeout"};a.getErrors=function(){return g};
a.jsonLink=function(a){if(!a)return"";a=a.split("?");a[0]=a[0].replace(/(\.[a-z0-9]{1,4})?$/i,".json");return a.join("?")};a.errorData=function(a,c){var b,l,e=a.responseText,c=a.status;if(!e&&c===0)return null;try{b=d.parseJSON(e)||{}}catch(y){b={},l=y.message||y}l||(l=b.statusText||a.statusText||g[c]||"Unknown Error");b.error=l;return b};a.ajax=function(g,f,b,l){function e(){b&&b()}function y(b){b.alert&&alert(b.alert);var a=b.success;a&&o.require("$21","growl.js").success.apply(this,a.push?a:[a]);
if((a=b.events)&&a.length)for(var f,g=o.require("$7","ga.js"),h=l||d(k.body);f=a.shift();)h.trigger(f,[b]),g.event("ajax",f);b.modal&&o.require("$9","LocoModal.js").replace(b.modal);if(b.download)c.location.assign(b.download);else if(b.redirect)return c.location.assign(b.redirect),!1;e();return!0}function r(b,c,d){if(b.status===401)o.require("$21","growl.js").login(),e();else if(c=a.errorData(b,c,d),c!=null)if(d=c.error,"function"===typeof f&&!1===f(null,d,b.status))e();else if(!c||!c.data||y(c.data))alert(d||
"Unknown error"),e()}g.error=r;g.success=function(b,a,c){if(!b)return r(c,"unknown");b.status&&alert(b.statusText||"Unknown error");"function"===typeof f&&!1===f(b&&b.data?b.data:b)?e():b&&b.data?y(b.data):e()};d.ajax(g)};return a}({},A,u));o.register("$9",function(a){function c(b,a){g.autoSize();var c=g.init();o.require("$5","html.js").init(c);c.find("[data-script]").each(function(b,e){for(var e=d(e),c=-1,l,t=e.attr("data-script").split(" ");++c<t.length;)l=t[c],f[l]?f[l](e,a||{}):alert("Unknown script "+
l)});c.trigger("locoModalLoaded",[g,b||"",a||{}]);var l,h=c.find("form")[0];if(h){c=0;a:for(;c<h.elements.length;c++)switch(l=h.elements[c],l.type){case "text":case "textarea":d(l).focus();break a}}}function k(a){var c=d(a.currentTarget),f=c.attr("data-modal");if(f==="close"){l();var h=c.attr("href");if(h&&-1!==h.indexOf("#!"))return!0}else{var k="submit"===a.type,n=c.attr("title")||c.attr("data-title"),h=c.attr("href")||c.attr("action"),B=k?c.serialize():"",c=k?c.attr("method"):"get";b(h,n,c,B);
f||(f=h.split("/").slice(1,4).join("-"));g.width(null).css("modal "+f).autoSize()}a.stopPropagation();a.preventDefault();return!1}var g=o.require("$17","overlay.js"),h=o.require("$7","ga.js"),f={},b=a.load=function(b,f,l,p){g.open().title("Loading ..").disableClose().css("modal").html('<div class="overlay-placeholder"></div>');var k=o.require("$16","http.js"),l={type:l||"get",data:p||"",url:k.jsonLink(b)};k.ajax(l,function(a,l,p){var k=a&&a.html;if(!k)return a=d('<h3 class="error"></h3>').text(l||
"Unknown error"),g.enableClose().title("Error "+p||"?").html("").append(a),!1;f=a.title||f||"Untitled";g.enableClose().title(f).html(k);c(b,a.js);h.page(b,f);g.init().one("overlayClosed",function(){h.reset()});return!0});return a},l=a.close=function(){g.close();return a};a.initLink=function(b){b.click(k)};a.initForm=function(b){d(b).submit(k)};a.replace=function(a){var f=a&&a.html,l=a&&a.url,d=a&&a.title;l?(b(l,d),a=a&&a.css||l.split("/").slice(1,4).join("-"),g.width(null).css(" modal "+a).autoSize()):
f&&(g.open().html(f),d&&g.enableClose().title(d),c("",a&&a.js))};a.find=function(b){return g.init().find(b)};a.script=function(b,c){if(c){if("function"!==typeof c.run)throw Error(b+" macro has no run function");f[b]=c.run;return a}return f[b]};return a}({},A,u));o.register("$18",function(a){a.listen=function(a,k){function g(){y[l?"show":"hide"]()}function h(){if(a.value!==l)f&&clearTimeout(f),l=a.value,e&&a.setAttribute("size",l.length||1),g(),f=setTimeout(function(){k(l)},b)}var a=a instanceof jQuery?
a[0]:a,f,b=200,l=a.value,e=1===Number(a.size),y=d('<a href="#clear" tabindex="-1" class="icon clear"><span>clear</span></a>').click(function(){a.value="";h();return!1});d(a).keyup(function(){h();return!0}).after(y);g();return{ping:h,val:function(b){if(b==null)return l;f&&clearTimeout(f);a.value=l=b;g()}}};return a}({},A,u));o.register("$19",function(a){function c(){this.length=this.depth=0;this.ignorecase=this.matchall=!0;var a={},c=[];this.getTree=function(){return a};this.getData=function(){return c}}
a.create=function(){return new c};var d=c.prototype;d.add=function(a,c){var f,b,l,e,d,k,p,q={};this.ignorecase&&(c=c.toLowerCase());null==c&&(c=String(a));d=this.getData();var n=d.length;d.push(a);p=c.split(/[\s\(\)\[\]/{/}\.\-_,:;]+/);for(d=0;d<p.length;d++)if((k=p[d])&&!q[k]){f=this.getTree();b=Math.min(k.length,this.depth)||k.length;for(l=0;l<b;l++)e=k.charAt(l),f=f[e]||(f[e]={});f=f[" "]||(f[" "]=[]);f.push(n);q[k]=!0}this.length++;return this};d.find=function(a){function c(b,a){var e,d,l;for(e in b)if(" "===
e)for(d in b[" "])l=b[" "][d],l=f[l]||(f[l]={length:0,words:{}}),l.length+=l.words[a]?0:1,l.words[a]=1+(l.words[a]||0);else c(b[e],a)}this.ignorecase&&(a=a.toLowerCase());var f={},b,d,e=0,k,r,p;d=a.split(/\s+/);a=0;a:for(;a<d.length;a++)if(b=d[a]){e++;p=this.getTree();r=b.split("");for(this.depth&&(r=r.slice(0,this.depth));k=r.shift();){if(!p[k])continue a;p=p[k]}c(p,b)}var q,a=[];b=this.getData();for(q in f)this.matchall&&f[q].length<e||a.push(b[q]);return a};return a}({},A,u));o.register("$10",
function(a){function c(a){this.url="/auto/"+a+".json?q=";this.dead={}}function k(){this.dict=o.require("$19","dict.js").create()}a.init=function(a){function h(){if("hint"!==F){var b=v.val()&&!(w&&w.val())&&t==null&&!B;K[b?"addClass":"removeClass"]("error")}}function f(){L.show();var b=v.outerWidth(!1),a=v.outerHeight(!1),c=v.css("margin-top");c&&(c=parseInt(c),isNaN(c)||(a+=c));b-=2;L.css("top",a+"px").css("width",b+"px");B=!0}function b(){L.hide();B=!1}function l(){L.html("");b();n=0;z=t=null}function e(b){l();
var a;for(a=0;a<b.length;a++){var c=a,e=b[a],t=d('<span class="label"></span>').text(e.label),g=d('<div class="auto-comp-result"></div>'),v=void 0;for(v in e)g.attr("data-"+v,e[v]);e.icon&&g.append(d("<span></span>").attr("class",e.icon));g.append(t);y(c,g)}(n=b.length)?(m&&f(),r(0)):(r(null),h())}function y(b,a){L.append(a);a.click(function(c){c.stopPropagation();r(b,a);q();return!1});return a}function r(b,a){z&&(z.removeClass("selected"),z=null);t=null;b==null?w&&w.val(""):(a||(a=L.find("div.auto-comp-result").eq(b)),
a.length&&(a.addClass("selected"),t=b,z=a))}function p(b){if(n){var a=n-1;t==null?b=b>0?0:a:(b=t+b,b<0?b=a:b>a&&(b=0));return r(b)}}function q(){if(t==null)Q.val(""),w&&w.val("");else{var a=L.find("div.auto-comp-result").eq(t),c=a.attr("data-value"),e=a.attr("data-label");w&&w.val(c);Q.val(e);b();a=a.clone();l();y(0,a);n=1;r(0,a);h();a.trigger("locoAutocomp",[c,e,a])}}var n=0,B=!1,m=!1,s=a.form,t=null,z=null,v=d(a),C=v.attr("name"),F=v.attr("data-mode"),D=v.attr("data-provider"),w="hint"!==F&&d('<input type="hidden" value="" name="'+
C+'" />').appendTo(s),K=d('<div class="auto-comp-wrap"></div>').replaceAll(v),L=d('<div class="auto-comp-drop"></div>');D&&(D=new c(D));w&&v.attr("name","_"+C);v.attr("autocomplete","off");K.append(v).append(L);b();v.focus(function(){m=!0;n>1&&f()}).blur(function(){m=!1;h()}).keydown(function(a){function c(){a.preventDefault();a.stopPropagation();return!1}switch(a.keyCode){case 27:B&&(a.stopPropagation(),b(),v.blur());break;case 40:n&&(B?p(1):f());break;case 38:B&&p(-1);break;case 13:if(B)return q(),
c();else if(!t&&F!=="hint")return c()}return!0});var Q=o.require("$18","LocoTextListener.js").listen(v,function(b){D&&D.fetch(b,e)});(s=v.attr("data-pre"))&&(s=d.parseJSON(s))&&s.value&&s.label?(e([s]),q()):a.value&&(!w||!w.val())&&D&&D.fetch(a.value,function(b){e(b);q()});return{$:v,clear:l,reset:function(){l();v.val("");w&&w.val("");Q.ping()},preload:function(b){n&&l();D=new k;var a,c;for(a in b)c=b[a],D.add(c)},mode:function(b){F=b}}};c.prototype.fetch=function(a,c){if(!a)return c&&c([]),this;
var f,b=this.dead;for(f in b)if(0===a.indexOf(f))return c&&c([]),this;f={dataType:"json",url:this.url+encodeURIComponent(a)};o.require("$16","http.js").ajax(f,function(f){var e=f&&f.results;e&&(c&&f.query&&f.query===a&&c(f.results),e.length||(b[a]=0));return!0});return this};k.prototype.add=function(a){var c=a.fulltext||a.label||a.value;c&&this.dict.add(a,c)};k.prototype.fetch=function(a,c){if(!a)return c&&c([]),this;var f=this.dict.find(a);c(f)};return a}({},A,u));o.register("$11",function(a,c,k){function g(b){b.stopPropagation();
b.preventDefault();return!1}function h(b,a,c){if(c=c||b.getElement(a))c.unbind().mouseup(function(c){c.stopPropagation();b.selectIndex(a,!0);return!1}).mouseover(function(){d(this).addClass("over");b.hover=a;return!0}).mouseout(function(){d(this).removeClass("over");b.hover=-1;return!0}),c=null;return b}function f(b){if(b){var a=this,c=b[0];a.id=c.id||"";a.name=c.name||"";a.prefix=c.getAttribute("data-prefix");a.defaultIcon=c.getAttribute("data-icon")||"jshide";var f=c.selectedIndex,g=[],h,q,n;for(q=
0;q<c.options.length;q++)h=c.options[q],n=h.disabled,h=d(h),g.push([h.val(),h.text(),h.attr("data-icon")||"",n]);a.hidden=d('<input type="hidden" name="'+a.name+'" value="" />').appendTo(c.form);a.list=d('<ul class="clearfix"></ul>');a.icon=d('<span class="icon"> </span>');a.selection=d("<label></label>");a.handle=d('<a class="handle" href="#"></a>').attr("tabindex",b.attr("tabindex")||"").append(a.icon).append(a.selection);a.wrapper=d("<div></div>").addClass(c.className).addClass("selector").append(a.handle).append(a.list).replaceAll(c);
this.id&&a.wrapper.attr("id",this.id);for(a.clearOptions();h=g.shift();)a.addOption.apply(a,h);a.handle.click(function(b){b.preventDefault();return!1}).mouseover(function(b){return a.onRollover(b)}).mouseout(function(b){return a.onRollout(b)}).mousedown(function(b){return a.onPress(b)}).keydown(function(b){return a.onKeydown(b)});d(k.body).mouseup(function(b){return a.onRelease(b)}).keydown(function(b){return a.onGlobalKeydown(b)});a.close();a.selectIndex(f)}}a.create=function(b){return new f(b)};
a.extend=function(b){b.prototype=new f};c=f.prototype;c.onRollover=function(){return this.over=!0};c.onRollout=function(){this.over=!1;return!0};c.onPress=function(b){return!this.active?(this.open(),b.stopPropagation(),b.preventDefault(),this.handle.focus(),!1):this.over?(this.close(),b.stopPropagation(),b.preventDefault(),!1):!0};c.onRelease=function(){this.active&&!this.over&&this.close();return!0};c.onGlobalKeydown=function(b){if(this.active)switch(b.keyCode){case 27:return this.close(),g(b);case 40:return this.hoverNext(1),
g(b);case 38:return this.hoverNext(-1),g(b);case 13:if(this.hover!=-1)return this.selectIndex(this.hover,!0),this.hoverItem(-1),this.close(),g(b)}return!0};c.onKeydown=function(b){return!this.active&&40===b.keyCode?(this.open(),g(b)):!0};c.open=function(){this.active=!0;this.hover=-1;this.wrapper.addClass("active");var b=this.handle.outerHeight()||0;this.list.show().css("top",b+"px");var b=this.handle.outerWidth()||0,a=this.list.outerWidth()||0;b>a&&(a-=this.list.width(),this.list.css("min-width",
String(b-a)+"px"))};c.close=function(){this.list.hide();this.active=!1;if(this.hover!==-1)this.getElement(this.hover).removeClass("over"),this.hover=-1;this.wrapper.removeClass("active")};c.hoverItem=function(b,a){this.hover!==-1&&this.getElement(this.hover).removeClass("over");this.hover=b;b!==-1&&(a=a||this.getElement(b),a.addClass("over"))};c.hoverNext=function(b){var a=this.options.length;if(a){a-=1;if(this.hover==-1)b=b>0?0:a;else if(b=this.hover+b,b<0){this.close();return}else b>a&&(b=0);this.hoverItem(b)}};
c.enableChange=function(b){this.eventName=b;this.eventData=[].slice.call(arguments,1);return this};c.clearOptions=function(){this.index={};this.length=0;this.options=[];this.list.html("");this.hidden.val("");this.idx=this.hover=-1;return this};c.addOption=function(b,a,c,f){var g=this.options.length,k=d("<span></span>").addClass(c||"jshide"),q=d("<label></label>").text(a||b),k=d("<li></li>").append(k).append(q).appendTo(this.list);if(f)return this.disableIndex(g),null;k.attr("data-option",g);this.options[g]=
{value:b,text:a,icon:c};this.index[b]=g;this.length=g+1;h(this,g,k);return g};c.disableOption=function(b){return this.disableIndex(this.index[b])};c.disableIndex=function(b){(b=this.getElement(b))&&!this.disabled&&b.addClass("disabled").unbind();return this};c.enableOption=function(b){return this.enableIndex(this.index[b])};c.enableIndex=function(b){return h(this,b)};c.reIndex=function(){this.index={};this.length=0;for(var b=this.options.length;-1<--b;)this.index[this.options[b].value]=b,this.length++};
c.selectValue=function(b,a){return this.selectIndex(this.index[b],a)};c.selectIndex=function(b,a){var c=this.options[b];if(c){this.hidden.val(c.value);if(b!==this.idx)this.idx=b,this.setLabel(c.text),this.icon.attr("class",c.icon||this.defaultIcon),a&&this.change();this.active&&this.close()}return this};c.setLabel=function(b){this.selection.text(b);this.prefix&&this.selection.prepend(d('<span class="prefix"></span>').text(this.prefix))};c.val=function(){var b=this.options[this.idx];return b&&b.value};
c.change=function(){var b=this.eventName||"change",a=this.eventData&&this.eventData.slice()||[];a.unshift(this.val());this.wrapper.trigger(b,a);return this};c.renameOption=function(b,a){var c=this.index[b],f=this.options[c];if(f)f.text=a,this.getElement(c).find("label").text(a),c===this.idx&&this.setLabel(a);return this};c.removeOption=function(b){var a=this.index[b],c=this.options[a];c&&(b=this.val(),this.getElement(a).remove(),this.options.splice(a,1),this.reIndex(),b===c.value?this.selectIndex(0,
!0):this.selectValue(b,!1))};c.getElement=function(b){return this.list.find("li").eq(b)};c=null;return a}({},A,u));o.register("$20",function(a){function c(a){d&&(a=g[a]||a);return a}var d=navigator.msPointerEnabled,g={touchstart:"MSPointerDown",touchmove:"MSPointerMove",touchend:"MSPointerUp"};a.bind=function(d,f,b){d=c(d);f.addEventListener&&f.addEventListener(d,b,!1);return a};a.unbind=function(d,f,b){d=c(d);f.removeEventListener&&f.removeEventListener(d,b,!1);return a};return a}({},A,u));o.register("$12",
function(a,c,k){function g(){l&&clearTimeout(l);l=null}function h(b){b.preventDefault();b.stopPropagation();return!1}var f,b,l,e=100,y=100,r=!1,p=!1,q;a.delays=function(b,a){e=b||0;y=a||0};a.kill=function(){b&&b.hide().stop().remove();b=null;f&&f.hide().html("")};a.text=function(a){b&&b.find("label.tip").text(a)};a.init=function(n){function B(){f||(f=d('<div id="tipholder"></div>').appendTo(k.body));return f}function m(){g();C?l=setTimeout(s,C):s()}function s(){g();r||p||z()}function t(){g();b&&(b.stop(),
b.remove());var a=n.offset();b=D.clone();B().show().append(b);var c=Math.round(a.left),a=Math.round(a.top);b.hasClass("tooltip-right")&&(c-=b.outerWidth(!1),c+=n.outerWidth(!1));b.hasClass("tooltip-top")?a-=b.outerHeight():a+=n.outerHeight();B().css("left",c+"px").css("top",a+"px");b.mouseenter(function(){r=!0;return!1}).mouseleave(function(){r=!1;m();return!0});Boolean(b.find("form").length|b.find("a").length)||b.click(v);n.trigger("tooltipOpen",[b])}function z(){function c(){a.kill()}b?b.fadeOut(500,
c):c();n.trigger("tooltipClose",[b])}function v(){if(!1!==n.triggerHandler("click")&&K)location.href=K;return!1}var C=Number(n.attr("data-hide-delay")||y),F=Number(n.attr("data-show-delay")||e),D=n.find("div.tooltip"),w=n.attr("title");if(!D.length){if(!w)return;D=d('<div class="tooltip"></div>').append(d('<label class="tip"></label>').text(w));n.hasClass("hastip-top")&&D.addClass("tooltip-top");n.hasClass("hastip-right")&&D.addClass("tooltip-right");n.prepend(D)}w&&(n.attr("data-title")&&D.children("label.tip").text(w),
n.attr("data-title",w),n.attr("title",""));var K=n.attr("href");K==="#"&&(K="");w=o.require("$20","touch.js").bind("touchstart",n[0],h).bind("touchmove",n[0],h).bind("touchend",n[0],function(a){setTimeout(v,300);return h(a)});null==q&&(q=!1,w.bind("touchstart",c,function(){return q=!0}).bind("touchend",c,function(){setTimeout(function(){q=!1},300);return!0}));n.mouseover(function(){q||(p=!0,g(),b?t():F?l=setTimeout(t,F):t());return!0}).mouseout(function(){q||(p=!1,m());return!0});K&&n.click(function(){p=
!1;z();return!0})};return a}({},A,u));o.register("$5",function(a,c,k){var g=0;c.attachEvent&&/MSIE ([\d\.]+)/.exec(navigator.appVersion)&&(g=parseInt(RegExp.$1));a.ie=function(a){return a?g<=a:g};var h=a.init=function(c){c?c instanceof jQuery||(c=d(c)):c=d(k.body);var b=o.require("$7","ga.js"),l=o.require("$8","forms.js"),e=o.require("$9","LocoModal.js"),y=o.require("$10","LocoAutoComplete.js"),r=o.require("$11","LocoSelector.js"),p=o.require("$12","tooltip.js");c.find("form").each(function(a,b){var c=
d(b);g&&10>g&&l.placeholders(c);b.getAttribute("data-modal")?e.initForm(b):b.action&&0!==b.action.indexOf("#")&&!b.target&&l.jsonify(b);c.hasClass("hasreveal")&&l.revealify(c);c.find("input.button").each(function(a,b){l.linkify(b)});c.find("input.auto-comp").each(function(b,a){y.init(a)});c.find("select.selector").each(function(a,b){r.create(d(b))})});c.find("a").each(function(c,f){-1!==f.className.indexOf("hastip")&&p.init(d(f));if(-1!==f.href.indexOf("/modal/")||f.getAttribute("data-modal"))e.initLink(d(f));
else{b.link(f);var g=f.getAttribute("data-ajax-target");g&&(g=d("#"+g),d(f).click(function(b){b.preventDefault();g.addClass("loading");d.get(f.href,function(b){b=a.$(b).replaceAll(g);h(b)});return!1}))}});l=e=y=c=null;return a};a.$=function(a){return d(c.innerShiv?innerShiv(a,!1):a)};d.fn._html=function(a){return a!=null?(a=this.html(c.innerShiv?innerShiv(a,!1):a),h(this),a):j.html()};d.fn.macro=function(a,b){if("function"!==typeof a.run)throw Error("macro has no run function");a.run(this,b||{});
return this};a.el=function(a,b){var c=k.createElement(a||"div");b&&(c.className=b);return c};a.txt=function(a){return k.createTextNode(a||"")};return a}({},A,u));o.register("$8",function(a,c){function k(a){function b(){if(a.value===g)a.value="",e.removeClass("placeheld");return!0}function c(){if(a.value==="")a.value=g,e.addClass("placeheld");return!0}var e=d(a);if(!e.hasClass("auto-comp")){var g=e.attr("placeholder");if(g)return e.focus(b).blur(c),c(),{kill:function(){b();e.unbind("focus",b).unbind("blur",
c)}}}}var g=a.enable=function(d){function b(a,b){if(!b.getAttribute("data-was-disabled"))b.disabled=!1}d.find(".button").removeClass("loading");d.find("input").each(b);d.find("select").each(b);d.find("textarea").each(b);c.attachEvent&&d.hasClass("has-placeholders")&&a.placeholders(d)},h=a.disable=function(a){function b(a,b){b.disabled?b.setAttribute("data-was-disabled","true"):b.disabled=!0}a.find(".button").addClass("loading");a.find("input").each(b);a.find("select").each(b);a.find("textarea").each(b)};
a.jsonify=function(a,b,l){a instanceof jQuery||(a=d(a));if(!a.disable)d.fn.disable=function(){h(this);return this},d.fn.enable=function(){g(this);this.placehold&&this.placehold();return this};var e="";a.find('[type="submit"]').click(function(a){a&&a.target&&a.target.name&&(e=encodeURIComponent(a.target.name)+"="+encodeURIComponent(a.target.value));return!0});a.submit(function(d){if(d&&d.isDefaultPrevented&&d.isDefaultPrevented())return!1;if(l&&!1===l(d))return!1;var g=c.tinyMCE;g&&a.find("textarea.editor").each(function(a,
b){var c=g.get(b.id);c&&c.save()});var h=a.serialize();e&&(h&&(h+="&"),h+=e,e="");a.disable();var k=o.require("$16","http.js"),h={url:k.jsonLink(a.attr("action")),type:a.attr("method"),data:h};k.ajax(h,b,function(){a.enable()},a);d.preventDefault();d.stopPropagation();return!1});if(a.hasClass("autopost")){var k,r=Number(a.attr("data-autopost-delay")||500);a.find('input[type="checkbox"]').change(function(){k&&clearTimeout(k);k=setTimeout(function(){a.submit()},r);return!0})}};a.revealify=function(a){a.find("div[data-reveal-if]").each(function(b,
c){function e(a){var b;m=m||a.target;if("."===n)b=Boolean(m&&m[o]);else if("="===n){var c,e;b=d(m.form).serializeArray();for(e in b)if(b[e].name===q)c=b[e].value;b=o===c}if(b!==k)if(k=b,a)g[k?"slideDown":"slideUp"](200);else g[k?"show":"hide"]();return!0}var g=d(c),h=/^([_\w\-\[\]]+)(\.|=)(.+)$/.exec(g.attr("data-reveal-if"));if(h){var k,q=h[1],n=h[2],o=h[3],h=a[0][q];h.length||(h=[h]);for(var m,b=0;b<h.length;b++)m=h[b],e(),d(m).change(e).removeClass("jshide");h=h=m=null}});a=null};a.linkify=function(a){var b=
a.getAttribute("data-icon");if(b){var c=d(a),e=d("<a> </a>");e.attr("href",a.form.action);e.attr("class",c.attr("class"));e.attr("tabindex",c.attr("tabindex"));c.attr("tabindex","-1");e.text(c.val());b&&d("<span></span>").prependTo(e).addClass(b);c.hide().after(e);e.click(function(){c.click();return!1})}};a.placeholders=function(a){var b,c=[];a.find("input[placeholder]").each(function(a,d){(b=k(d))&&c.push(b)});c.length&&(a.submit(function(){for(var a in c)c[a].kill()}),a.addClass("has-placeholders"),
b=i=null)};return a}({},A,u));o.register("$13",function(a,c){var d=c.requestAnimationFrame,g=c.cancelAnimationFrame,h=0;if(!d||!g)for(var f in{ms:1,moz:1,webkit:1,o:1})if(d=c[f+"RequestAnimationFrame"])if(g=c[f+"CancelAnimationFrame"]||c[f+"CancelRequestAnimationFrame"])break;if(!d||!g)d=function(a){var d=b();timeToCall=Math.max(0,16-(d-h));nextTime=d+timeToCall;timerId=c.setTimeout(function(){a(nextTime)},timeToCall);h=nextTime;return timerId},g=function(a){clearTimeout(a)};var b=Date.now||function(){return(new Date).getTime()};
a.loop=function(a,b){function c(){h=d(c,b);a(f++)}var f=0,h;c();return{stop:function(){h&&g(h);h=null}}};return a}({},A,u));o.register("$6",function(a,c,d){function g(a,c){if(b)a.MSPOINTER_TYPE_TOUCH===a.pointerType&&c(0,a);else for(var d=-1,e=(a.originalEvent||a).changedTouches||[];++d<e.length;)c(d,e[d])}function h(a){a.preventDefault();a.stopPropagation();return!1}var f,b=c.navigator.msPointerEnabled,l=b?"MSPointerDown":"touchstart",e=b?"MSPointerMove":"touchmove",y=b?"MSPointerUp":"touchend";
a.ok=function(b){f==null&&(f="function"===typeof d.body.addEventListener);f&&b&&b(a);return f};a.dragger=function(a,b){function c(b){a.addEventListener(b,f[b],!1)}function d(b){a.removeEventListener(b,f[b],!1)}var f={};f[l]=function(a){g(a,function(c,d){d.type=l;b(a,d,k)});c(e);c(y);return!0};f[y]=function(a){d(e);d(y);g(a,function(c,d){d.type=y;b(a,d,k)});return!0};f[e]=function(a){g(a,function(c,d){d.type=e;b(a,d,k)});return h(a)};c(l);var k={kill:function(){d(l);d(e);d(y);a=k=b=null}};return k};
a.swiper=function(a,c,d){function f(b){a.addEventListener(b,C[b],!1)}function k(b){a.removeEventListener(b,C[b],!1)}function s(){t&&t.stop();t=null}var t,z,v,C={},F=[],D=[],w=[];C[l]=function(b){z=!1;s();var c=r();g(b,function(a,b){F[a]=c;D[a]=b.clientX;w[a]=b.clientY});v=a.scrollLeft;return!0};C[y]=function(a){g(a,function(a,b){var d=r()-F[a],e=D[a]-b.clientX;c(Math.abs(e)/d,e?e<0?-1:1:0)});v=null;return!0};C[e]=function(b){var c,d;v==null||g(b,function(a,b){c=D[a]-b.clientX;d=w[a]-b.clientY});if(d&&
Math.abs(d)>Math.abs(c))return z=!0;if(c)z=!0,a.scrollLeft=Math.max(0,v+c);return h(b)};if(!b||d)f(l),f(e),f(y),b&&(a.className+=" mstouch");return{kill:function(){k(l);k(e);k(y);s()},swiped:function(){return z},ms:function(){return b},snap:function(c){b&&!d&&(a.style["-ms-scroll-snap-points-x"]="snapInterval(0px,"+c+"px)",a.style["-ms-scroll-snap-type"]="mandatory",a.style["-ms-scroll-chaining"]="none")},scroll:function(b,c,d){s();var e=a.scrollLeft,f=b>e?1:-1,g=Math[f===1?"min":"max"],h=Math.round(c*
16*f);return t=o.require("$13","fps.js").loop(function(c){if(c)e=Math.max(0,g(b,e+h)),a.scrollLeft=e,b===e&&(s(),d&&d(e))},a)}}};var r=Date.now||function(){return(new Date).getTime()};return a}({},A,u));o.register("$4",function(a,c,k){function g(a,b){var c=a.id,d=c&&m[c],e=d&&d.parent();if(!d||!e)return null;var f=(c=e.dir===B)?"X":"Y",c=c?y:r,g=c(e.el),h=b["offset"+f];null==h&&(h=b["page"+f]-c(a));h&&(g+=h);return{move:function(a){e.resize(a["page"+f]-g,d);return!0}}}function h(a){function b(){d(k).unbind("mousemove",
c);s=null;return!0}function c(a){s?s.move(a):b();return!0}if(s)return!0;s=g(a.target,a);if(!s)return!0;d(k).one("mouseup",b).mousemove(c);return e(a)}function f(a,b){var c=b.type;"touchmove"===c?s&&s.move(b):"touchstart"===c?s=g(a.target,b):"touchend"===c&&s&&(s=null)}function b(a){var b=d(a.target).closest("div.wg-tr"),c=b.length&&b.closest("div.is-table");(c=c&&m[c.attr("id")])&&c.selectRow(Number(b.attr("data-row")));return e(a)}function l(a){var t;var b=a.keyCode;if(b=40===b?1:38===b?-1:0){var c=
d(a.target),f=c.data("row");if(f>-1&&(t=(c=c.closest("div.is-table"))&&m[c.attr("id")],c=t))return c.selectRow(f+b),e(a)}return!0}function e(a){a.stopPropagation();a.preventDefault();return!1}function y(a,b){b||(b=k.body);for(var c=a.offsetLeft||0;(a=a.offsetParent)&&a!==b;)c+=a.offsetLeft||0;return c}function r(a,b){b||(b=k.body);for(var c=a.offsetTop||0;(a=a.offsetParent)&&a!==b;)c+=a.offsetTop||0;return c}function p(a){function b(){var c=a.innerHTML;c!==e&&(e=c,d(a).trigger("wgChange",[c]));return!0}
var c=n.ie()?["keyup","paste"]:["input"],e=a.innerHTML,f=e;return d(a).attr("contenteditable","true").focus(function(){for(var e=d(a),f=-1;++f<c.length;)e.bind(c[f],b);return!0}).blur(function(){for(var g=d(a),h=-1;++h<c.length;)g.unbind(c[h]);b();f!==e&&d(a).trigger("wgChanged",[a]);return!0})}function q(a){this.el=a;this.id=a.id;this.pos=this.index=0;this.css=["wg-cell"];m[a.id]=this;this.clear()}var n=o.require("$5","html.js"),B=1,m={},s=!1;a.init=function(a){var b=new q(a);b.restyle().redraw();
b.root=!0;o.require("$6","touch.js").ok(function(b){b.dragger(a,f)});d(a).mousedown(h);return b};c=q.prototype;c.each=function(a){for(var b=-1;++b<this.length;)a(b,this.cells[b]);return this};c.bind=function(){return this.$("bind",arguments)};c.unbind=function(){return this.$("unbind",arguments)};c.$=function(a,b){d.fn[a].apply(d(this.el),b);return this};c.parent=function(){return this.pid&&m[this.pid]};c.splitx=function(){return this._split(B,arguments)};c.splity=function(){return this._split(2,
arguments)};c._split=function(a,b){this.dir&&this.dir!==a&&this.clear();this.dir=a;var c=-1,d,e=this.length,f=b.length,g=1/(e+f),h=0;if(e)throw Error("Todo: implement re-split");for(;++c<f;){d=n.el();this.body.appendChild(d);for(var l=d,k=b[c],o=k,p=1;m[k];)k=o+"-"+ ++p;l.id=k;d=new q(d);d.index=e+c;d.pid=this.id;d.pos=h;h+=g;this.cells.push(d);this.length++}this.restyle().redraw();return this.cells};c.clear=function(){for(var a=-1,b;++a<this.length;)b=this.cells[a].clear(),delete m[b.id];this.cells=
[];this.length=0;this.nav&&this.el.removeChild(this.nav);this.nav=null;if(this.body){if(this.field&&n.ie())d(this.body).triggerHandler("blur"),this.field=null;if(this.table)this.table=null;this.el.removeChild(this.body)}this.body=this.el.appendChild(n.el("","wg-body"));return this};c.resize=function(a,b){if(!b&&(b=this.cells[1],!b))return;var c=b.index,e=d(this.el)[this.dir===B?"width":"height"](),f=this.cells[c+1],c=this.cells[c-1];pad=(b.body||b.el.firstChild).offsetTop||0;max=(f?f.pos*e:e)-pad;
min=c?c.pos*e:0;b.pos=Math.min(max,Math.max(min,a))/e;(e=this.parent())&&e.table?e.redraw():this.redraw();return this};c.distribute=function(){for(var a,b=0;b<arguments.length;)a=Math.max(0,Math.min(1,arguments[b++])),this.cells[b].pos=a;this.redraw();return this};c.restyle=function(){var a=this.css.slice();this.root&&a.push("wg-root");this.index===0?a.push("first"):a.push("not-first");this.dir&&(a.push("wg-split"),2===this.dir?a.push("wg-split-y"):a.push("wg-split-x"));this.t&&a.push("has-title");
this.nav&&a.push("has-nav");this.table?a.push("is-table"):null!=this.field&&(a.push("is-field"),this.field||a.push("readonly"));this.el.className=a.join(" ");return this};c.redraw=function(){if(this.body){var a=this.el.clientHeight||0,b=this.body.offsetTop||0;b<a&&(a-=b);this.body.style.height=String(a)+"px"}for(var a=this.length,c,e=1,f=this.dir===2?"height":"width";--a>=0;){b=this.cells[a];if(this.nav)c=1;else{if(b.fixed)b.pos=b.fixed/d(this.el)[f]();c=e-b.pos;e=b.pos}b.el.style[f]=String(100*c)+
"%";b.restyle().redraw()}this.table&&this.redrawTable();return this};c.redrawTable=function(){var a=-1,b=this.cells[0],c=this.cells[1],a=d(c.body).width(),e=c.body.firstChild,c=e.childNodes;e.style.width=a+"px";for(var a=b.length,f=1;--a>=0;)e=b.cells[a],c[a].style.width=String(100*(f-e.pos))+"%",f=e.pos;return!0};c.contents=function(a){if(null===a)return this.body.innerHTML;this.cells.length?this.clear():this.body&&this.el.removeChild(this.body);this.body=this.el.appendChild(n.el("","wg-content"));
"string"===typeof a?d(this.body).html(a):this.append(a);this.redraw();return this};c.textarea=function(a,b){this.contents(n.txt(a));(this.field=b)&&p(this.body);this.restyle();return this};c.append=function(a){a.nodeType?this.body.appendChild(a):d(this.body).append(a);return this};c.header=function(a){if(!arguments.length)return this.el.getElementsByTagName("h2")[0];this.t=n.txt(a||"");this.el.insertBefore(n.el("h2","wg-title"),this.body).appendChild(this.t);this.restyle().redraw();return this};c.title=
function(a){this.t?this.t.nodeValue=a||"":this.header(a);return this.t};c.tabulate=function(a){var c=this.id,e=[],f=[];rows=this.splity(c+"-thead",c+"-body");thead=rows[0];tbody=rows[1];thead.css.push("wg-thead");tbody.css.push("wg-tbody");a.eachCol(function(a,b){e.push(c+"-col"+a);f.push(b)});for(var g=-1,h,k=n.el("","wg-cols"),m=thead._split(B,e);++g<m.length;)h=m[g],h.header(f[g]),k.appendChild(n.el("","wg-col "+(g===0?"":"not-")+"first"));tbody.contents(k);a.eachRow(function(a,b,c){tbody._addRow(b,
c)});d(tbody.el).mousedown(b);this.lock();this.table=a;this.restyle().redraw();h=thead.cells[0];tbody.fixed=r(h.body,h.el)||20;this.resize(tbody.fixed);d(k).attr("tabindex","-1").keydown(l);return k};c.lock=function(){this.body.className+=" locked";return this};c.addRow=function(a,b){this.table&&this.cells[1]&&this.cells[1]._addRow(a,b);return this};c._addRow=function(a,b){for(var c,d=this.body.firstChild.childNodes,e=d.length,f=d[0].childNodes.length,g=-1;++g<e;)c=d[g].appendChild(n.el("",b||"wg-tr")),
c.setAttribute("data-row",f),c=c.appendChild(n.el("","wg-td")),a[g]&&/\S/.test(a[g])?c.appendChild(n.txt(a[g])):c.innerHTML="&nbsp;";return d};c.tr=function(a){for(var b=-1,c,d=[],e=this.cells[1].body.firstChild.childNodes;++b<e.length;)(c=e[b].childNodes[a])&&d.push(c);return d};c.td=function(a,b){try{return this.cells[1].body.firstChild.childNodes[b].childNodes[a].firstChild}catch(c){return null}};c.selectRow=function(a){var b=this.table&&this.table.row(a);if(b){var c=this.tr(a);if(c.length){var e=
this.cells[1],f=e.body,g=d(f.firstChild);g.find("div.selected").removeClass("selected");d(c).addClass("selected");g.data("row",a);var h=f.scrollTop;g.focus();if(h)f.scrollTop=h;e.scrollTo(c[0]);g.trigger("wgRowSelect",[a,b])}return this}};c.scrollTo=function(a,b){var c,e=this.body.scrollTop,f=this.body.clientHeight+e,g=r(a,this.body),h=g+d(a).outerHeight();e>g?c=g:f<h&&(c=h-this.body.clientHeight);if(null!=c)b?this.body.scrollTop=c:d(this.body).animate({scrollTop:c},300);return this};c.navigize=function(a){function b(a,
c){f=a.show();g=c.addClass("active");a.trigger("wgTabSelect",[a.data("index")]);return a}var c=this;c.nav&&c.el.removeChild(c.nav);c.nav=c.el.insertBefore(n.el("nav","wg-tabs"),c.body);var f,g,h=d(c.nav).click(function(a){var h=d(a.target),k=h.data("tab");if(k){var l=g;f&&f.hide();l&&l.removeClass("active");b(k,h).children().focus();c.redraw();return e(a)}});c.each(function(c,e){e.pos=0;var g=d(e.el).data("index",c),k=d('<a href="#'+e.id+'"></a>').data("tab",g).text(a[c]).appendTo(h);f?g&&g.hide():
b(g,k)});c.lock();c.restyle().redraw();h=null;return c};c=null;return a}({},A,u));o.register("$2",function(a,c,k){function g(a){var c=k.createElement("pre");c.innerHTML=a.replace(/<(p|div|br) ?\/?>/ig,"\n<$1>").replace(/(^\n+|\n+$)/g,"");a="string"===typeof c.textContent?c.textContent:"string"===typeof c.innerText?c.innerText:d(c).text();return a}a.init=function(a){function f(a){if(!a)return["",""];var b=[a.source()||"",a.translation()||""];(a=a.context())&&(b[0]+=" [ "+a+" ]");return b}function b(a){if(a=
a||z){var b=m.indexOf(a),b=u.tr(b);d(b).attr("class",e(a)+" po-unsaved");p("poUnsaved",[++v])}}function k(a,c){c=c||z;if(!c)return null;var d=c.fuzzy();null!=a&&d!=a&&(c.fuzzy(a),p("poFuzzy",[c,a]),b(c));return d}function e(a){var b=["wg-tr"];a&&(a.fuzzy()&&b.push("po-fuzzy"),a.translation()||b.push("po-empty"),a.comment()&&b.push("po-comment"),z&&m.eq(z,a)&&b.push("selected"));return b.join(" ")}function y(a,b){var c=f(a)[b||0],e=m.indexOf(a),e=u.td(e,b);c&&/\S/.test(c)?d(e).text(c.replace("\n",
" ")):d(e).html("&nbsp;")}function r(a){a!==s&&(t=(s=a)?m.lock(t):m.unlock()||t,p("poLock",[a,t]),z&&B(z))}function p(b,c){return d(a).trigger(b,c||[])}function q(){if(!m||!m.row)u.clear().header("Error").contents("Invalid PO");else{var a;u.table&&(a=C?C.parentNode.scrollTop:0,u.clear());C=u.tabulate(A);if(a)C.parentNode.scrollTop=a;p("poLoad");(a=m.locale())?(t=a,r(!0)):r(!1);return!!m.length}}function n(){z&&(p("poDeselected",[z]),z=null)}function B(a){function c(){var d=t&&t.lang&&"en"!==t.lang&&
t.label;H.title(d?d+" translation:":"Translation:");if(r){var h=[],m=o.require("$3","collection.js").init();a.each(function(a,b){h.push("Form "+a);m.add("plural-"+a,b)});w=H.splitx.apply(H,m.keys);H.each(function(a,b){b.textarea(m[a],f)});H.navigize(h).bind("wgTabSelect",function(a,b){e=b})}else H.textarea(a.translation(),f);H.bind("wgChange",function(c,d){var f=g(d);a.translate(f,e);0===e&&y(a,1);p("poTranslate",[a,f]);a.fuzzy()?k(!1,a):b(a)})}function d(){H.title("Context:");H.textarea(a.context(),
!0);H.bind("wgChange",function(c,d){var e=g(d);a.context(e);e=a.source();y(a,0);p("potChange",[a,e]);b(a)}).bind("wgChanged",function(){m.reIndex(a)})}n();z=a;J.unbind().clear();H.unbind().clear();I.unbind();I.textarea(a.comment(),!0).bind("wgChange",function(c,d){var e=g(d);a.comment(e);p("poComment",[a,e]);b(a)});var e=0,f=s,h=!s,q=a.source()||"",r=a.plural();(function(){r?(w=J.splity(J.id+"-singular",J.id+"-plural"),w[0].header("Singular:").textarea(q,h),w[1].header("Plural:").textarea(r,h),J.lock()):
J.textarea(q,h);h&&J.bind("wgChange",function(c,d){var e=g(d);J.id+"-plural"===c.target.parentNode.id?a.plural(e):(a.source(e),y(a,0));p("potChange",[a,e]);b(a)}).bind("wgChanged",function(b){J.id+"-plural"===b.target.parentNode.id||m.reIndex(a)})})();f?c():d();p("poSelected",[a]);data=null}var m,s,t,z,v=0,C,A={row:function(a){return f(m.row(a))},eachCol:function(a){a(0,"Source text");a(0,"Translation")},eachRow:function(a){var b=0;m.each(function(c,d){a(b++,f(d),e(d))})}},D=o.require("$4","LocoWinGrid.js").init(a),
w=D.splity("po-list","po-edit"),u=w[0],E=w[1],w=E.splitx("po-trans","po-comment"),G=w[0],I=w[1].header("Comment:"),w=G.splity("po-source","po-target"),J=w[0].header("Source text:"),H=w[1].header("Translation:");D.distribute(0.34);E.distribute(0.8);d(c).resize(function(){D.redraw(!0);return!0});u.bind("wgRowSelect",function(a,b){var c=m.row(b);B(c);return!0});return{bind:function(b,c){return d(a).bind(b,c)},load:function(a){m=a;q()&&u.selectRow(0)},save:function(a){if(v||a)d(C).find("div.po-unsaved").removeClass("po-unsaved"),
p("poSave");v=0;return m},fuzzy:function(a){return k(a)},del:function(a,b){var c=arguments.length?m.get(a,b):z;if(c){var d=m.del(c);null!=d&&(z&&m.eq(c,z)&&n(),q(),m.length&&!z&&(d=Math.min(d,m.length-1),u.selectRow(d)))}},add:function(a,c){var d,f=m.get(a,c);f?d=m.indexOf(f):(d=m.length,f=m.add(a,c),u.addRow(A.row(d),e(f)),b(f));u.selectRow(d);return f},lock:function(){r(!0)},unlock:function(){r(!1)},locked:function(){return Boolean(s)}}};return a}({},A,u));var X=A.ajaxurl||"/wp-admin/admin-ajax.php",
R=(A.loco||{}).conf||{},P=R.locale,I=o.require("$1","po.js").create(P),G={},N=u.getElementById("loco-poedit-inner"),O=A.loco__||function(a){return a};d(A).resize(function(){function a(){var a;a=N;for(var h=a.offsetTop||0;(a=a.offsetParent)&&a!==void 0;)h+=a.offsetTop||0;a=h;h=d(A).innerHeight();N.style.height=String(Math.max(k,h-a-c))+"px";return!0}var c=20,k=parseInt(d(N).css("min-height")||0);a();return a}());G.save=function(a){function c(){a.disabled=!1}c();E.bind("poUnsaved",function(){d(a).addClass("button-primary loco-flagged")}).bind("poSave",
function(){d(a).removeClass("button-primary loco-flagged")});d(a.form).submit(function(k){var g=k.target;k.target.po.value=I.toString();a.disabled=!0;V(g,function(a){c();d("#loco-po-modified").text(a.modified);E.save(!0);U(O("File saved")+", "+a.filename)},c);return M(k)});return!0};G.download=function(a){a.disabled=!1;d(a).click(function(){a.form.po.value=I.toString();d(N).trigger("poSave");return!0});return!0};G.add=!P&&function(a){a.disabled=!1;d(a).click(function(a){var d=1,g;for(g="New message";I.get(g);)d=
/(\d+)/.exec(g)?Math.max(d,RegExp.$1):d,g="New message "+ ++d;E.add(g);return M(a)});return!0};G.del=!P&&function(a){a.disabled=!1;d(a).click(function(a){E.del();return M(a)});return!0};G.fuzzy=P&&function(a){function c(c){d(a)[c?"addClass":"removeClass"]("loco-inverted")}a.disabled=!1;E.bind("poSelected",function(a,d){c(d.fuzzy())}).bind("poFuzzy",function(a,d,h){c(h)});d(a).click(function(a){var c=!E.fuzzy();E.fuzzy(c);return M(a)});return!0};G.sync=function(a){function c(){a.disabled=!1}c();E.bind("poUnsaved",
function(){a.disabled=!0}).bind("poSave",function(){c()});d(a.form).submit(function(k){a.disabled=!0;V(k.target,function(a){c();var h=o.require("$1","po.js").create(void 0);h.load(a.exp);var f=[],b=I.merge(h),h=b.add.length,b=b.del.length;E.load(I);h||b?(f.push("Merged from "+(a.pot||"source code")),h&&f.push(h+" new string"+(h===1?"":"s")+" added"),b&&f.push(b+" obsolete string"+(b===1?"":"s")+" removed"),d(N).trigger("poUnsaved",[])):f.push("Already up to date with "+(a.pot||"source code"));U(f.join(". "))},
c);return M(k)});return!0};G.revert=function(a){E.bind("poUnsaved",function(){a.disabled=!1}).bind("poSave",function(){a.disabled=!0});d(a).click(function(a){location.reload();return M(a)});return!0};G.help=function(){return!0};N.innerHTML="";var E=o.require("$2","poedit.js").init(N);d("#loco-nav").find("button").each(function(a,c){var k=c.getAttribute("data-loco");G[k]&&G[k](c)||d(c).hide()});G=null;E.bind("poUnsaved",function(){A.onbeforeunload=function(){return O("Your changes will be lost if you continue without saving")}}).bind("poSave",
function(){A.onbeforeunload=null});P?I.load(R.po||{}):I.load(R.pot||{});E.load(I);d("#wpbody-content").find("div.loco-message").each(function(a,c){S(c,!0)})})(window,document,window.jQuery);